<!DOCTYPE html>
<html>
<head>
    <title>Scatter Plot with Hover Popup</title>
    <style>
        /* Styling for the popup */
        .popup {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            padding: 5px;
            display: none;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Scatter Plot with Hover Popup</h1>
    <div id="scatterPlot" style="width: 400px; height: 300px; border: 1px solid #ccc; position: relative;"></div>

    <!-- Include D3.js library -->
    <script src="https://d3js.org/d3.v6.min.js"></script>

    <script>
        // Sample data for the scatter plot
        const data = [
            { x: 50, y: 100 },
            { x: 150, y: 50 },
            { x: 250, y: 200 },
            { x: 350, y: 150 },
        ];

        // Create the scatter plot
        const scatterPlot = d3.select("#scatterPlot");

        const svg = scatterPlot.append("svg") // Add an SVG element to the container
            .attr("width", 400)
            .attr("height", 300);

        const points = svg.selectAll("circle") // Select circles inside the SVG
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", d => d.x)
            .attr("cy", d => d.y)
            .attr("r", 5)
            .attr("fill", "steelblue")
            .on("mouseover", showPopup)
            .on("mouseout", hidePopup);

        // Function to show the popup on hover
        function showPopup(event, d) {
            const popup = d3.select(this)
                .attr("r", 8) // Increase the point size on hover
                .append("div")
                .attr("class", "popup")
                .text(`(${d.x}, ${d.y})`);

            // Calculate the position for the popup
            const popupX = event.clientX + 10;
            const popupY = event.clientY - 30;

            popup.style("left", `${popupX}px`)
                .style("top", `${popupY}px`)
                .style("display", "block");
        }

        // Function to hide the popup on mouseout
        function hidePopup() {
            d3.select(this)
                .attr("r", 5) // Reset the point size on mouseout
                .select(".popup")
                .remove();
        }
    </script>
</body>
</html>
