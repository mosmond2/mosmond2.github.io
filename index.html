<!DOCTYPE html>
<html>
<head>
    <title>Scatter Plot with Hover Popup</title>
    <style>
        /* Styling for the popup */
        .popup {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            padding: 5px;
            pointer-events: none;
        }

        /* Styling for the axis labels */
        .axis-label {
            font-size: 12px;
        }
        
        /* Styling for the text container */
        #textContainer {
            position: absolute;
            top: 30px;
            left: 600px;
            width: 300px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Scatter Plot with Hover Popup</h1>
    <div id="scatterPlot" style="width: 500px; height: 400px; border: 1px solid #ccc; position: relative;"></div>
    <div id="textContainer">
        <h2>Data Details</h2>
        <p id="dataDetails">Hover over the points to see the coordinates.</p>
    </div>

    <!-- Include D3.js library -->
    <script src="https://d3js.org/d3.v6.min.js"></script>

    <script>
        // Sample data for the scatter plot
        const data = [
            { x: 50, y: 100 },
            { x: 150, y: 50 },
            { x: 250, y: 200 },
            { x: 350, y: 150 },
        ];

        // Define a color scale using D3.js color scheme
        const colorScale = d3.scaleOrdinal(d3.schemeCategory10);

        // Create the scatter plot
        const scatterPlot = d3.select("#scatterPlot");

        // Set up the dimensions and margins for the plot
        const width = 900; // Increased to accommodate the text container
        const height = 400;
        const margin = { top: 30, right: 100, bottom: 70, left: 70 };
        const plotWidth = width - margin.left - margin.right;
        const plotHeight = height - margin.top - margin.bottom;

        const svg = scatterPlot.append("svg") // Add an SVG element to the container
            .attr("width", width)
            .attr("height", height);

        // Create scales for the axes
        const xScale = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.x)])
            .range([0, plotWidth]);

        const yScale = d3.scaleLinear()
            .domain([0, d3.max(data, d => d.y)])
            .range([plotHeight, 0]);

        // Add circles for the scatter plot points
        const points = svg.selectAll("circle")
            .data(data)
            .enter()
            .append("circle")
            .attr("cx", d => margin.left + xScale(d.x))
            .attr("cy", d => margin.top + yScale(d.y))
            .attr("r", 5)
            .attr("fill", (d, i) => colorScale(i)) // Use color scale to assign colors
            .on("mouseover", showPopup)
            .on("mouseout", hidePopup);

        // Function to show the popup on hover
        function showPopup(event, d) {
            const popup = svg.append("text")
                .attr("class", "popup")
                .attr("x", margin.left + xScale(d.x) + 10)
                .attr("y", margin.top + yScale(d.y) - 10)
                .text(`(${d.x}, ${d.y})`);

            popup.style("display", "block");
        }

        // Function to hide the popup on mouseout
        function hidePopup() {
            svg.select(".popup").remove();
        }

        // Add axis labels and title
        svg.append("text")
            .attr("class", "axis-label")
            .attr("x", width / 2)
            .attr("y", height - margin.bottom + 40)
            .style("text-anchor", "middle")
            .text("X Axis");

        svg.append("text")
            .attr("class", "axis-label")
            .attr("x", -height / 2)
            .attr("y", margin.left - 40)
            .attr("transform", "rotate(-90)")
            .style("text-anchor", "middle")
            .text("Y Axis");

        svg.append("text")
            .attr("x", width / 2)
            .attr("y", margin.top)
            .attr("text-anchor", "middle")
            .style("font-size", "18px")
            .text("Scatter Plot");

        // Add axis tick marks and labels
        const xAxis = d3.axisBottom(xScale).ticks(5);
        const yAxis = d3.axisLeft(yScale).ticks(5);

        svg.append("g")
            .attr("class", "x-axis")
            .attr("transform", `translate(${margin.left}, ${height - margin.bottom})`)
            .call(xAxis);

        svg.append("g")
            .attr("class", "y-axis")
            .attr("transform", `translate(${margin.left}, ${margin.top})`)
            .call(yAxis);

    </script>
</body>
</html>

